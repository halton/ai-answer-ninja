# Conversation Engine Service Environment Configuration

# Server Configuration
PORT=3003
HOST=0.0.0.0
NODE_ENV=development
SERVICE_NAME=conversation-engine
MAX_CONNECTIONS=1000
REQUEST_TIMEOUT=30000

# Database Configuration
DB_HOST=localhost
DB_PORT=5432
DB_NAME=ai_ninja
DB_USERNAME=postgres
DB_PASSWORD=your-password
DB_SSL=false
DB_MAX_CONNECTIONS=20
DB_CONNECTION_TIMEOUT=30000

# Redis Configuration
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=your-redis-password
REDIS_DB=2
REDIS_TTL=3600

# Azure OpenAI Configuration
AZURE_OPENAI_API_KEY=your-openai-api-key
AZURE_OPENAI_ENDPOINT=https://your-openai-resource.openai.azure.com/
AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4
AZURE_OPENAI_API_VERSION=2023-12-01-preview
AZURE_OPENAI_MAX_TOKENS=1000
AZURE_OPENAI_TEMPERATURE=0.7
AZURE_OPENAI_TOP_P=1.0
AZURE_OPENAI_FREQUENCY_PENALTY=0.0
AZURE_OPENAI_PRESENCE_PENALTY=0.0

# Azure Cognitive Services
AZURE_SPEECH_KEY=your-azure-speech-key
AZURE_SPEECH_REGION=eastus2
AZURE_SPEECH_ENDPOINT=https://eastus2.api.cognitive.microsoft.com/
AZURE_TEXT_ANALYTICS_KEY=your-text-analytics-key
AZURE_TEXT_ANALYTICS_ENDPOINT=https://your-text-analytics.cognitiveservices.azure.com/

# Security Configuration
JWT_SECRET=your-super-secret-jwt-key-change-in-production
JWT_EXPIRES_IN=1h
ENCRYPTION_KEY=your-encryption-key-32-chars-min
CORS_ORIGINS=http://localhost:3000,https://your-frontend-domain.com

# Rate Limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_STRICT_MODE=false

# Conversation Configuration
DEFAULT_CONVERSATION_TIMEOUT=300000
MAX_CONVERSATION_TURNS=20
MAX_MESSAGE_LENGTH=1000
ENABLE_CONVERSATION_HISTORY=true
CONVERSATION_HISTORY_LIMIT=100

# Intent Recognition
INTENT_CONFIDENCE_THRESHOLD=0.7
ENABLE_INTENT_CACHING=true
INTENT_CACHE_TTL=1800
CUSTOM_INTENT_MODEL_ENDPOINT=

# Sentiment Analysis
ENABLE_SENTIMENT_ANALYSIS=true
SENTIMENT_CONFIDENCE_THRESHOLD=0.6
SENTIMENT_CACHE_TTL=300

# Response Generation
RESPONSE_GENERATION_TIMEOUT=10000
ENABLE_RESPONSE_CACHING=true
RESPONSE_CACHE_TTL=3600
MAX_RESPONSE_LENGTH=500
ENABLE_PERSONALIZATION=true

# Emotion Detection
ENABLE_EMOTION_ANALYSIS=true
EMOTION_CONFIDENCE_THRESHOLD=0.5
EMOTION_CACHE_TTL=300

# Learning and Optimization
ENABLE_CONVERSATION_LEARNING=true
LEARNING_FEEDBACK_THRESHOLD=0.8
MODEL_UPDATE_INTERVAL=86400000
ENABLE_A_B_TESTING=false

# External Services
PHONE_GATEWAY_URL=http://localhost:3001
REALTIME_PROCESSOR_URL=http://localhost:3002
USER_MANAGEMENT_URL=http://localhost:3005
PROFILE_ANALYTICS_URL=http://localhost:3004
SMART_WHITELIST_URL=http://localhost:3006
MONITORING_SERVICE_URL=http://localhost:3009

# Service Discovery
ENABLE_SERVICE_DISCOVERY=false
CONSUL_HOST=localhost
CONSUL_PORT=8500
SERVICE_TAGS=conversation,ai,nlp

# Monitoring and Logging
LOG_LEVEL=info
ENABLE_REQUEST_LOGGING=true
ENABLE_PERFORMANCE_MONITORING=true
ENABLE_ERROR_TRACKING=true
METRICS_ENABLED=true
METRICS_PORT=9091

# Performance Configuration
ENABLE_COMPRESSION=true
COMPRESSION_LEVEL=6
COMPRESSION_THRESHOLD=1024
ENABLE_CACHING=true
CACHE_MAX_SIZE=1000
DEFAULT_CACHE_TTL=300

# NLP Configuration
NLP_LANGUAGE=zh-CN
NLP_TOKENIZER=jieba
ENABLE_KEYWORD_EXTRACTION=true
KEYWORD_MAX_COUNT=10
ENABLE_ENTITY_RECOGNITION=true

# Development/Debug Configuration
DEBUG_MODE=false
DEBUG_LOG_REQUESTS=false
DEBUG_LOG_RESPONSES=false
DEBUG_SAVE_CONVERSATIONS=false
DEBUG_CONVERSATION_PATH=./debug/conversations

# Feature Flags
FEATURE_ADVANCED_INTENT_RECOGNITION=true
FEATURE_EMOTION_BASED_RESPONSES=true
FEATURE_CONTEXT_AWARE_RESPONSES=true
FEATURE_MULTI_TURN_CONVERSATIONS=true
FEATURE_VOICE_TONE_ANALYSIS=false
FEATURE_REAL_TIME_LEARNING=false

# AI Model Configuration
PRIMARY_MODEL=azure-openai
FALLBACK_MODEL=local-nlp
MODEL_SWITCHING_THRESHOLD=0.9
ENABLE_MODEL_ENSEMBLE=false

# Response Templates
ENABLE_TEMPLATE_RESPONSES=true
TEMPLATE_PRIORITY_THRESHOLD=0.8
CUSTOM_TEMPLATES_PATH=./templates
DEFAULT_LANGUAGE=zh-CN
SUPPORTED_LANGUAGES=zh-CN,en-US

# Quality Control
ENABLE_RESPONSE_QUALITY_CHECK=true
MIN_RESPONSE_QUALITY_SCORE=0.7
ENABLE_TOXICITY_FILTER=true
TOXICITY_THRESHOLD=0.8